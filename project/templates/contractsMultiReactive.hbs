// <auto-generated>
//     This code was generated with love by Gentitas.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>

using Entitas;
using UnityEngine;
using System.Collections.Generic;

{{#each modules}}
namespace {{@key}}.Contracts {
{{#each multiReactiveContracts}}
    {{#if namespaceValue}}namespace {{namespaceValue}} { {{/if}}
        namespace Base {
            public abstract class {{nameUpperValue}}: MultiReactiveSystem<IEntity, Contexts> {
                public {{nameUpperValue}}(Contexts contexts) : base(contexts) {
                }

                protected override ICollector[] GetTrigger(Contexts contexts) {
                    return new ICollector[] {
                        {{#each triggersValue}}
                        {{context.moduleNameRefValue}}.Contexts.sharedInstance.{{context.nameValue}}.CreateCollector(
                            Matcher<{{context.moduleNameRefValue}}.{{context.nameUpperValue}}Entity>
                                {{#if match.allOf}}
                                .AllOf({{#each match.allOf}}{{../context.moduleNameRefValue}}.{{../context.nameUpperValue}}Matcher.{{nameUpperValue}}{{#unless @last}}, {{/unless}}{{/each}}){{/if}}{{#if match.anyOf.length}}
                                .AnyOf({{#each match.anyOf}}{{../context.moduleNameRefValue}}.{{../context.nameUpperValue}}Matcher.{{nameUpperValue}}{{#unless @last}}, {{/unless}}{{/each}}){{/if}}{{#if match.noneOf.length}}
                                .NoneOf({{#each match.noneOf}}{{../context.moduleNameRefValue}}.{{../context.nameUpperValue}}Matcher.{{nameUpperValue}}{{#unless @last}}, {{/unless}}{{/each}}){{/if}}){{#unless @last}},{{/unless}}
                        {{/each}}
                    };
                }

                protected override bool Filter(IEntity entity) {
                    return true;
                }

                protected override void Execute(List<IEntity> entities) { Act(entities); }

                protected virtual void Act (List<IEntity> entities) {
                    Debug.Log("Not implemented contract: {{moduleNameValue}}.{{nameUpperValue}}");
                }
            }
        }

        public partial class {{nameUpperValue}}: Base.{{nameUpperValue}} {
            public {{nameUpperValue}} (Contexts contexts) : base(contexts) { }
        }
    {{#if namespaceValue}} } {{/if}}

{{/each}}

}

{{/each}}
